(function(E){E.fn.kxbdSuperMarquee=function(e){var L=E.extend({},E.fn.kxbdSuperMarquee.defaults,e);return this.each(function(){var e=E(this);var r=e.get(0);var t=e.width();var i=e.height();var n=e.children();var o=n.children();var l=0;var u=L.direction=="left"||L.direction=="right"?1:0;var a,c,s,f;var d,v,h,m,p;var q,A;var b,g;var T=[];var I=0;var M=0;var k=0;n.css(u?"width":"height",1e4);var w="<ul>";if(L.isEqual){q=o[u?"outerWidth":"outerHeight"]();A=o.length;l=q*A;for(var x=0;x<A;x++){T.push(x*q);w+="<li>"+(x+1)+"</li>"}}else{o.each(function(e){T.push(l);l+=E(this)[u?"outerWidth":"outerHeight"]();w+="<li>"+(e+1)+"</li>"})}w+="</ul>";if(l<(u?t:i))return;n.append(o.clone()).css(u?"width":"height",l*2);if(L.navId){b=E(L.navId).append(w).hover(O,C);g=E("li",b);g.each(function(e){E(this).bind(L.eventNav,function(){if(s)return;if(I==e)return;D(T[e]);g.eq(I).removeClass("navOn");I=e;E(this).addClass("navOn")})});g.eq(I).addClass("navOn")}if(L.direction=="right"||L.direction=="down"){r[u?"scrollLeft":"scrollTop"]=l}else{r[u?"scrollLeft":"scrollTop"]=0}if(L.isMarquee){f=setTimeout(y,L.scrollDelay);e.hover(function(){clearInterval(f)},function(){clearInterval(f);f=setTimeout(y,L.scrollDelay)});if(L.controlBtn){E.each(L.controlBtn,function(e,t){E(t).bind(L.eventA,function(){L.direction=e;L.oldAmount=L.scrollAmount;L.scrollAmount=L.newAmount}).bind(L.eventB,function(){L.scrollAmount=L.oldAmount})})}}else{if(L.isAuto){C();e.hover(O,C)}if(L.btnGo){E.each(L.btnGo,function(e,t){E(t).bind(L.eventGo,function(){if(s==true)return;L.direction=e;D();if(L.isAuto){O();C()}})})}}function y(){var e=L.direction=="left"||L.direction=="right"?"scrollLeft":"scrollTop";if(L.isMarquee){if(L.loop>0){k+=L.scrollAmount;if(k>l*L.loop){r[e]=0;return clearInterval(f)}}var t=r[e]+(L.direction=="left"||L.direction=="up"?1:-1)*L.scrollAmount}else{if(L.duration){if(d++<m){s=true;var t=Math.ceil(B(d,v,h,m));if(d==m){t=p}}else{t=p;clearInterval(a);s=false;return}}else{var t=p;clearInterval(a)}}if(L.direction=="left"||L.direction=="up"){if(t>=l){t-=l}}else{if(t<=0){t+=l}}r[e]=t;if(L.isMarquee){f=setTimeout(y,L.scrollDelay)}else if(d<m){if(a)clearTimeout(a);a=setTimeout(y,L.scrollDelay)}else{s=false}}function D(e){s=true;var t=L.direction=="left"||L.direction=="right"?"scrollLeft":"scrollTop";var i=L.direction=="left"||L.direction=="up"?1:-1;M=M+i;if(e==undefined&&L.navId){g.eq(I).removeClass("navOn");I+=i;if(I>=A){I=0}else if(I<0){I=A-1}g.eq(I).addClass("navOn");M=I}var n=M<0?l:0;d=0;v=r[t];p=e!=undefined?e:n+L.distance*M%l;if(i==1){if(p>v){h=p-v}else{h=p+l-v}}else{if(p>v){h=p-l-v}else{h=p-v}}m=L.duration;if(a)clearTimeout(a);a=setTimeout(y,L.scrollDelay)}function C(){c=setInterval(function(){D()},L.time*1e3)}function O(){clearInterval(c)}function S(e,t,i,n){return i*e/n+t}function B(e,t,i,n){return-i*(e/=n)*(e-2)+t}function G(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t}})};E.fn.kxbdSuperMarquee.defaults={isMarquee:false,isEqual:true,loop:0,newAmount:3,eventA:"mousedown",eventB:"mouseup",isAuto:true,time:5,duration:50,eventGo:"click",direction:"left",scrollAmount:1,scrollDelay:10,eventNav:"click"};E.fn.kxbdSuperMarquee.setDefaults=function(e){E.extend(E.fn.kxbdSuperMarquee.defaults,e)}})(jQuery);